(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Tp7n:function(e,t,a){"use strict";a.r(t);var n=a("KQm4"),c=a("q1tI"),r=a.n(c),l=a("hGi/"),o=(a("kSBX"),a("T3EJ")),i=a("DEsH"),s=a("1G37"),m=a("eW31"),d=a("8qo5"),u=Object(c.createContext)(null),v=function(){return Object(c.useContext)(u)},h=a("pJAA"),E=a("vIQ3"),f=a("heD2"),_=function(e){return e.releaseHistory[0]},b=function(e){return new f.Version(e)},k=function(e){Object(l.a)(e);var t=v(),a=_(t),n=b(a.version),c=h.a(a.dateRelease),o=n.mmp+"/metadata/cover.png";return r.a.createElement("section",{className:"content__section"},r.a.createElement("div",{className:"main-presentation"},r.a.createElement("div",{className:"main-meta"},r.a.createElement("span",{className:"main-meta-informer__version"},n.preReleaseName),r.a.createElement("time",{className:"main-meta-informer__date",dateTime:a.dateRelease},c)),r.a.createElement("h1",{className:"main-title"},n.mmp),r.a.createElement("div",{className:"main-cover"},r.a.createElement(E.a,{className:"win-innovation-cover__cover",relativePath:o,alt:"cover"}))))},p=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"social-network__share ya-share2","data-services":"vkontakte,facebook,twitter,whatsapp,telegram"})},N=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"content__under-cover-bar"},r.a.createElement(p,null))},O=a("EKdO"),g=a("AnUa"),j=a("FATx"),w=a("Fatc"),C=a("uRCh"),x=a("EaY7"),S=Object(m.a)((function(e){Object(l.a)(e),Object(g.a)(),Object(j.a)(),Object(x.a)();var t=Object(w.d)().versionFilter,a=v().innovations.filter((function(e){return t.canDisplayedByVersion(new f.Version(e.version).preReleaseName)})).map((function(e,t){return r.a.createElement("section",{key:t,id:C.pathToNativeElementAttributeValue(e.path),className:"content__section win-content__innovation-list-item"},r.a.createElement(O.a,{commitInfoAll:e.commitInfoAll,contentOnGithubLink:e.fileOnGithubLink}),r.a.createElement("span",{className:"content__html-content-wrapper",dangerouslySetInnerHTML:{__html:e.html}}))}));return r.a.createElement(r.a.Fragment,null,a)})),y=a("kmFt"),P=a("Va/Y"),I=a("KraK"),V=a("ouma"),A=a("OaiF"),L=a("4KgZ"),F=function(e){var t=e.children;return r.a.createElement(y.a,{className:"filter-dropdown"},r.a.createElement(P.a,null,r.a.createElement(I.a,{size:I.b.SM},r.a.createElement(V.m,null),r.a.createElement(L.a,{position:L.b.BottomCenter},"Фильтр версий"))),r.a.createElement(A.a,{className:"filter-dropdown__menu content__control-bar-dropdown-item",openClassName:"filter-dropdown__menu_open-state",closeClassName:"filter-dropdown__menu_close-state"},t))},R=a("TSYQ"),T=a.n(R),D=Object(c.createContext)({name:"",setState:function(e){},getState:function(e){return!1}}),B=function(e){var t=e.name,a=e.children,n=Object(c.useState)({}),l=n[0],o=n[1],i={name:null!=t?t:Object(C.generateStringId)(),setState:function(e){var t=e.id,a=e.checked;return o((function(){return Object.keys(l).reduce((function(e,n){var c;return Object.assign(e,((c={})[n]=n===t&&(null!=a?a:!l[n]),c))}),{})}))},getState:function(e){return l[e]}};return r.a.createElement(D.Provider,{value:i},a)},H=Object(c.createContext)({id:"",checked:!1}),K=function(){return Object(c.useContext)(H)},Y=Object(m.a)((function(e){var t,a,n=e.onChecked,l=e.value,o=e.className,i=e.classNameChecked,s=void 0===i?"checked":i,m=e.classNameNotChecked,d=void 0===m?"not-checked":m,u=e.checked,v=void 0!==u&&u,h=e.id,E=e.children,f=Object(c.useContext)(D),_=f.name,b=f.setState,k=f.getState,p=Object(c.useRef)(null!=h?h:Object(C.generateStringId)()),N=null!==(t=k(p.current))&&void 0!==t?t:v,O={id:p.current,checked:N},g=T()("radio",o,((a={})[s]=N,a[d]=!N,a));return Object(c.useEffect)((function(){b({id:p.current,checked:O.checked!==N?N:v})}),[v]),r.a.createElement(H.Provider,{value:O},r.a.createElement("label",{htmlFor:p.current,className:g},r.a.createElement("input",{type:"radio",id:p.current,name:_,value:l,className:"radio__input",checked:N,onChange:function(){var e={id:p.current,checked:!N};b(Object.assign({},e)),n&&n(Object.assign({},e))}}),E))})),z=Object(m.a)((function(e){var t,a=e.onChecked,n=e.className,l=e.classNameChecked,o=void 0===l?"checked":l,i=e.classNameNotChecked,s=void 0===i?"not-checked":i,m=e.value,d=e.children,u=e.checked,v=void 0!==u&&u,h=e.id,E=void 0===h?Object(C.generateStringId)():h,f=Object(c.useRef)(null!=E?E:Object(C.generateStringId)()),_=T()("checkbox",n,((t={})[o]=v,t[s]=!v,t)),b={id:f.current,checked:v};return r.a.createElement(H.Provider,{value:b},r.a.createElement("label",{className:_},r.a.createElement("input",{type:"checkbox",value:m,id:f.current,className:"checkbox__input",onChange:function(){a&&a({checked:!v,id:f.current})},checked:v}),d))})),G=function(e){var t=e.id,a=e.className,n=e.children,c=K().id,l=void 0===c?t:c,o=T()("label",a);return r.a.createElement("label",{htmlFor:l,className:o},n)},J=a("MM21"),M=function(e){var t,a=e.className,n=K().checked,c=T()("checkbox__icon-group",a,((t={})["checkbox__icon-group_checked"]=n,t["checkbox__icon-group_not-checked"]=!n,t));return r.a.createElement("div",{className:c},r.a.createElement(J.a,{condition:n},r.a.createElement(V.h,{className:"checkbox__svg-icon"})),r.a.createElement(J.a,{condition:!n},r.a.createElement(V.i,{className:"checkbox__svg-icon"})))},Q=Object(m.a)((function(e){Object(l.a)(e);var t=Object(w.c)();return r.a.createElement("form",{className:"win-filter-dropdown-menu__control-bar"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md"},"Отобразить:"),r.a.createElement(B,{name:"filter-version"},r.a.createElement(Y,{value:"last",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedLastVersion()},checked:t.isLastVersionChecked},r.a.createElement(G,null,"Последнее")),r.a.createElement(Y,{value:"all",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedAllVersion()},checked:t.isAllVersionChecked},r.a.createElement(G,null,"Все")))))})),U=Object(m.a)((function(e){Object(l.a)(e);var t=Object(w.c)(),a=t.versionInfoAll.map((function(e,a){return r.a.createElement("li",{key:a,className:"win-filter-content-form__list-item"},r.a.createElement(z,{id:e.data.version,className:"win-filter-content-form__checkbox",value:e.data.version,onChecked:function(){return t.changeByVersion(e.data.version)},checked:e.checked},r.a.createElement(G,{className:"win-filter-content-form__label"},r.a.createElement(M,null),r.a.createElement("span",{className:"win-filter-content-form__label_version"},e.data.version),r.a.createElement("span",{className:"win-filter-content-form__label_date"},"(",e.data.dateRelease,")"),r.a.createElement("span",{className:"win-filter-content-form__label_count"},e.data.count))))}));return r.a.createElement("form",{className:"win-filter-content-form"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md legend-with-meta"},r.a.createElement("span",{className:"legend_md_base-info"},"История версий"),r.a.createElement("span",{className:"legend_md_meta-info"},"Всего: ",t.innovationCount)),r.a.createElement("ul",null,a)))})),q=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement("div",{className:"win-version-filter"},r.a.createElement("header",{className:"win-version-filter__header"},r.a.createElement("span",null,"Версионный фильтр")),r.a.createElement("div",{className:"scroll-wrapper"},r.a.createElement(Q,null),r.a.createElement(U,null)))})),X=a("pFkx"),Z=function(e){var t=e.message;return r.a.createElement("div",{className:"content__content-placeholder_empty"},r.a.createElement("div",{className:"content-placeholder__informer"},r.a.createElement("span",{className:"content-placeholder__label"},t)))},W=Object(m.a)((function(e){Object(l.a)(e);var t=Object(w.d)().versionFilter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{condition:0===t.checkedLength},r.a.createElement(Z,{message:"Ничего не выбранно"})),r.a.createElement(J.a,{condition:t.checkedLength>0&&0===t.checkedInnovationCount},r.a.createElement(J.a,{condition:1===t.checkedLength},r.a.createElement(Z,{message:"Выбранная версия не содержит нововведений"})),r.a.createElement(J.a,{condition:t.checkedLength>1},r.a.createElement(Z,{message:"Выбранные версии не содержат нововведений"}))))})),$=a("DaPz"),ee=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement(o.a,{driver:r.a.createElement(s.b,null),content:r.a.createElement(i.a,{controlBar:r.a.createElement(d.a,null,r.a.createElement("div",{className:"content__win-control-bar_wrapper"},r.a.createElement(F,null,r.a.createElement(q,null)))),content:r.a.createElement($.a,null,r.a.createElement(k,null),r.a.createElement(N,null),r.a.createElement(S,null),r.a.createElement(W,null),r.a.createElement(X.a,null))})})})),te=a("H8eV"),ae=a("bnLi"),ne=a("73Uz"),ce=Object(c.createContext)(null),re=function(e){var t=e.innovations.reduce((function(e,t){return e.hasOwnProperty(t.version)||(e[t.version]=0),e[t.version]++,e}),{});return e.releaseHistory.map((function(e){var a;return{version:b(e.version).preReleaseName,dateRelease:h.b(e.dateRelease),count:null!==(a=t[e.version])&&void 0!==a?a:0}}))},le=function(e){var t;return null!==(t=null==e?void 0:e.split(",").map((function(e){return e.trim()})))&&void 0!==t?t:[]},oe=Object(c.createContext)(null),ie=a("19Yi"),se=a("h59u"),me=a("Bapu"),de=a("mLh/"),ue=a("cddY"),ve=a("S8kh"),he=a("3ihZ");t.default=function(e){var t=e.pageContext,a=e.location,l=t.localization,o=t.innovationData,i=t.winTocTree,s=t.pageNavDataAll,m=w.b.getInstance({winTocTree:i,innovationData:o,pageNavDataAll:s,location:a,initialCheckedVersion:le(new URLSearchParams(a.search).get("filter")),versionInfoAll:re(o)}),d=m.stores,v=m.validators,h=d.router;return Object(he.a)(a,h),Object(c.useLayoutEffect)((function(){var e=d.versionFilter;e.clean(),e.addVersionInfo.apply(e,Object(n.a)(re(o)));var t=le(h.search.get("filter"));t.length>0?e.checkedByVersion.apply(e,Object(n.a)(t)):e.checkedAllVersion()}),[h.pageName]),r.a.createElement(w.a.Provider,{value:d},r.a.createElement(oe.Provider,{value:v},r.a.createElement(ie.a.Provider,{value:d.behaviorNotificationStore},r.a.createElement(ce.Provider,{value:s},r.a.createElement(ae.a.Provider,{value:l},r.a.createElement(ve.b.Provider,{value:h},r.a.createElement(ue.a.Provider,{value:d.contentIntersectionObserver},r.a.createElement(de.a.Provider,{value:d.contentNav},r.a.createElement(me.a.Provider,{value:d.contentDownPanelStore},r.a.createElement(ne.a,null,r.a.createElement(te.a,null),r.a.createElement(u.Provider,{value:o},r.a.createElement(ee,null),r.a.createElement(se.a,null))))))))))))}},kSBX:function(e,t,a){}}]);
//# sourceMappingURL=component---src-page-templates-what-is-new-page-what-is-new-page-provider-tsx-f3a120345bb56cd089d0.js.map