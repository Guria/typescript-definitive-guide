# Связывание, типизация, вывод типов

![Chapter Cover](./images/chapter-cover.png)

## Связывание (Binding)

Прежде чем код высокого уровня, превратится в последовательность инструкций, которые смогут выполниться на машине, его нужно к этому подготовить. Конкретные детали зависят от конкретного языка программирования. Общим для всех является то, что компилятор или интерпретатор должен построить понятную ему модель на основе определяемого языком синтаксиса. Построение модели разделяется на этапы _лексического_, _синтаксического_ и _семантического_ анализа.

## Лексический анализ (токенизация - tokenizing)

На этапе _лексического анализа_, исходный код разбивается на лексемы, при этом пробелы и комментарии удаляются.

_Лексема_ - это последовательность допустимых символов.

Для примера, представьте код объявления переменной `n`, которой, в качестве значения, присваивается результат операций, умножения чисел `2` и `3` с последующим сложением с числом `100`, после которых идет точка с запятой.

```typescript
var n = 100 + 2 * 3;
```

Этот код будет разбит на девять лексем - `var`, `n`, `=`, `100`, `+`, `2`, `*`, `3`, `;`.

## Синтаксический анализ (разбор - parsing)

На этапе _синтаксического анализа_, обычно строится дерево разбора, путем определения последовательности лексем. Дерево разбора ещё называют синтаксическое дерево.

В качестве примера можно привести предыдущий код, в котором порядок операций вычисления выражений изменен из-за присутствия в нем оператора умножения. Простыми словами результат выражения будет вычисляться не слева направо, а справа налево. Именно на этапе синтаксического анализа и определяется правильная последовательность.

```typescript
var n = 100 + 2 * 3;
```

## Семантический анализ

На этапе _семантического анализа_, который считается самым важным этапом, устанавливается семантика (смысл) построенного на предыдущем шаге дерева разбора.

В процессе семантического анализа, в зависимости от среды выполнения, может осуществляться привязка идентификаторов к типу данных, проверка совместимости, вычисление типов выражений и т.д.

Результатом выполнения этапа может являться расширенное дерево разбора, новое дерево либо другие структуры, которые будут способствовать дальнейшему разбору и преобразованию промежуточного кода.

Независимо от того, какая структура будет получена на этапе семантического анализа, такие конструкции, как переменные, поля, свойства, параметры и возвращаемые функциями и методами значения, установят связь с типами данных, к которым они принадлежат. Другими словами, произойдет связывание.

_Связывание_ (binding) - это операция, при которой конструкции, нуждающиеся в аннотации типа, ассоциируются с типами данных, к которым они принадлежат.

## Типизация

После того, как были рассмотрены фундаментальные понятия, лежащие в основе термина типизация, сформулируем его определение.

_Типизация_ - это процесс установления принадлежности результата выражения к типу данных, с последующим связыванием его с объектом данных, представляющим его в программе.

## Вывод Типов (type inference)

_Вывод типов_ - это возможность компилятора (интерпретатора) логически определять-указывать тип данных на основе анализа выражения.

Для переменной, не имеющей явной аннотации типа, вывод типов выведет тип данных на основе результата присваемого выражения.

```typescript
// так разработчик видит
var n = 5 + 5; // так видит вывод типов var n: number = 5 + 5;
```

В большинстве случаев термин вывод типов употребляется относительно языков, нуждающихся в предварительной компиляции, на этапе которой и происходит указание типов данных путем их вывода. Реже упоминания встречаются в контексте интерпретируемых языков, в которых при помощи вывода типа производятся оптимизации на этапе выполнения.

## Итоги

Подведем итоги -

-   Связывание - это операция определения принадлежности к типу данных с последующей ассоциацией его с объектом данных.
-   Типизация - это процесс, в котором программа устанавливает принадлежность к типу данных и связывает его с объектом данных.
-   Вывод типов - это способность компилятора\интерпретатора логически определять-указывать типы на основе выражения.
