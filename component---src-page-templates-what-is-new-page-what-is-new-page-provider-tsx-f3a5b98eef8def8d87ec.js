(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FYJp:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a("heD2"),c=function(e){return e.releaseHistory[0]},r=function(e){return new n.Version(e)}},Tp7n:function(e,t,a){"use strict";a.r(t);var n,c=a("zLVn"),r=a("q1tI"),l=a.n(r),i=a("hGi/"),o=(a("kSBX"),a("T3EJ")),s=a("DEsH"),m=a("1G37"),d=a("eW31"),u=a("8qo5"),v=Object(r.createContext)(null),E=a("pJAA"),h=a("vIQ3"),_=a("FYJp"),b=function(e){Object(i.a)(e);var t=Object(r.useContext)(v),a=Object(_.a)(t),n=Object(_.b)(a.version),c=E.a(a.dateRelease),o=n.mmp+"/metadata/cover.png";return l.a.createElement("section",{className:"content__section"},l.a.createElement("div",{className:"main-presentation"},l.a.createElement("div",{className:"main-meta"},l.a.createElement("span",{className:"main-meta-informer__version"},n.preReleaseName),l.a.createElement("time",{className:"main-meta-informer__date",dateTime:a.dateRelease},c)),l.a.createElement("h1",{className:"main-title"},n.mmp),l.a.createElement("div",{className:"main-cover"},l.a.createElement(h.a,{className:"win-innovation-cover__cover",relativePath:o,alt:"cover"}))))},f=function(e){return Object(i.a)(e),l.a.createElement("div",{className:"social-network__share ya-share2","data-services":"vkontakte,facebook,twitter,whatsapp,telegram"})},k=function(e){return Object(i.a)(e),l.a.createElement("div",{className:"content__under-cover-bar"},l.a.createElement(f,null))},p=a("EKdO"),N=a("AnUa"),O=a("FATx"),g=a("Fatc"),j=a("EaY7"),w=Object(d.a)((function(e){Object(i.a)(e),Object(N.a)(),Object(O.a)(),Object(j.a)();var t=Object(g.d)().innovations.innovationDataAll.map((function(e,t){return l.a.createElement("section",{key:t,id:e.path,className:"content__section win-content__innovation-list-item"},l.a.createElement(p.a,{commitInfoAll:e.commitInfoAll,contentOnGithubLink:e.fileOnGithubLink}),l.a.createElement("span",{className:"content__html-content-wrapper",dangerouslySetInnerHTML:{__html:e.html}}))}));return l.a.createElement(l.a.Fragment,null,t)})),C=a("kmFt"),A=a("Va/Y"),P=a("KraK"),x=a("ouma"),S=a("OaiF"),I=a("4KgZ"),V=a("TSYQ"),y=a.n(V),L=a("MM21");!function(e){e[e.Active=0]="Active",e[e.Inactive=1]="Inactive"}(n||(n={}));var F=function(e){var t,a=e.isActive,c=e.state,r=void 0===c?n.Active:c,i=y()("activity",((t={})["activity-state_active"]=r===n.Active,t["activity-state_inactive"]=r===n.Inactive,t));return l.a.createElement(L.a,{condition:a},l.a.createElement("div",{className:i}))},D=Object(d.a)((function(e){var t=e.children,a=Object(g.c)();return a.isAllVersionChecked,l.a.createElement(C.a,{className:"filter-dropdown"},l.a.createElement(A.a,null,l.a.createElement(F,{isActive:!a.isAllVersionChecked,state:a.isAllVersionUnchecked?n.Inactive:n.Active}),l.a.createElement(P.a,{size:P.b.SM},l.a.createElement(x.m,null),l.a.createElement(I.a,{position:I.b.BottomCenter},"Фильтр версий"))),l.a.createElement(S.a,{className:"filter-dropdown__menu content__control-bar-dropdown-item",openClassName:"filter-dropdown__menu_open-state",closeClassName:"filter-dropdown__menu_close-state"},t))})),R=a("uRCh"),T=Object(r.createContext)({name:"",setState:function(e){},getState:function(e){return!1}}),Y=function(e){var t=e.name,a=e.children,n=Object(r.useState)({}),c=n[0],i=n[1],o={name:null!=t?t:Object(R.generateStringId)(),setState:function(e){var t=e.id,a=e.checked;return i((function(){return Object.keys(c).reduce((function(e,n){var r;return Object.assign(e,((r={})[n]=n===t&&(null!=a?a:!c[n]),r))}),{})}))},getState:function(e){return c[e]}};return l.a.createElement(T.Provider,{value:o},a)},B=Object(r.createContext)({id:"",checked:!1}),J=function(){return Object(r.useContext)(B)},z=Object(d.a)((function(e){var t,a,n=e.onChecked,c=e.value,i=e.className,o=e.classNameChecked,s=void 0===o?"checked":o,m=e.classNameNotChecked,d=void 0===m?"not-checked":m,u=e.checked,v=void 0!==u&&u,E=e.id,h=e.children,_=Object(r.useContext)(T),b=_.name,f=_.setState,k=_.getState,p=Object(r.useRef)(null!=E?E:Object(R.generateStringId)()),N=null!==(t=k(p.current))&&void 0!==t?t:v,O={id:p.current,checked:N},g=y()("radio",i,((a={})[s]=N,a[d]=!N,a));return Object(r.useEffect)((function(){f({id:p.current,checked:O.checked!==N?N:v})}),[v]),l.a.createElement(B.Provider,{value:O},l.a.createElement("label",{htmlFor:p.current,className:g},l.a.createElement("input",{type:"radio",id:p.current,name:b,value:c,className:"radio__input",checked:N,onChange:function(){var e={id:p.current,checked:!N};f(Object.assign({},e)),n&&n(Object.assign({},e))}}),h))})),H=Object(d.a)((function(e){var t,a=e.onChecked,n=e.className,c=e.classNameChecked,i=void 0===c?"checked":c,o=e.classNameNotChecked,s=void 0===o?"not-checked":o,m=e.value,d=e.children,u=e.checked,v=void 0!==u&&u,E=e.id,h=void 0===E?Object(R.generateStringId)():E,_=Object(r.useRef)(null!=h?h:Object(R.generateStringId)()),b=y()("checkbox",n,((t={})[i]=v,t[s]=!v,t)),f={id:_.current,checked:v};return l.a.createElement(B.Provider,{value:f},l.a.createElement("label",{className:b},l.a.createElement("input",{type:"checkbox",value:m,id:_.current,className:"checkbox__input",onChange:function(){a&&a({checked:!v,id:_.current})},checked:v}),d))})),K=function(e){var t=e.id,a=e.className,n=e.children,c=J().id,r=void 0===c?t:c,i=y()("label",a);return l.a.createElement("label",{htmlFor:r,className:i},n)},G=function(e){var t,a=e.className,n=J().checked,c=y()("checkbox__icon-group",a,((t={})["checkbox__icon-group_checked"]=n,t["checkbox__icon-group_not-checked"]=!n,t));return l.a.createElement("div",{className:c},l.a.createElement(L.a,{condition:n},l.a.createElement(x.h,{className:"checkbox__svg-icon"})),l.a.createElement(L.a,{condition:!n},l.a.createElement(x.i,{className:"checkbox__svg-icon"})))},M=Object(d.a)((function(e){Object(i.a)(e);var t=Object(g.c)();return l.a.createElement("form",{className:"win-filter-dropdown-menu__control-bar"},l.a.createElement("fieldset",{className:"fieldset_md"},l.a.createElement("legend",{className:"legend_md"},"Отобразить:"),l.a.createElement(Y,{name:"filter-version"},l.a.createElement(z,{value:"last",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedLastVersion()},checked:t.isLastVersionChecked},l.a.createElement(K,null,"Последнее")),l.a.createElement(z,{value:"all",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedAllVersion()},checked:t.isAllVersionChecked},l.a.createElement(K,null,"Все")))))})),U=Object(d.a)((function(e){Object(i.a)(e);var t=Object(g.c)(),a=t.versionInfoAll.map((function(e,a){return l.a.createElement("li",{key:a,className:"win-filter-content-form__list-item"},l.a.createElement(H,{id:e.data.version,className:"win-filter-content-form__checkbox",value:e.data.version,onChecked:function(){return t.changeByVersion(e.data.version)},checked:e.checked},l.a.createElement(K,{className:"win-filter-content-form__label"},l.a.createElement(G,null),l.a.createElement("span",{className:"win-filter-content-form__label_stage"},e.data.stage),l.a.createElement(L.a,{condition:""!==e.data.updateVersion},l.a.createElement("span",{className:"win-filter-content-form__label_update-version"},"upd",e.data.updateVersion)),l.a.createElement("span",{className:"win-filter-content-form__label_date"},"(",e.data.dateRelease,")"),l.a.createElement("span",{className:"win-filter-content-form__label_count"},e.data.count))))}));return l.a.createElement("form",{className:"win-filter-content-form"},l.a.createElement("fieldset",{className:"fieldset_md"},l.a.createElement("legend",{className:"legend_md legend-with-meta"},l.a.createElement("span",{className:"legend_md_base-info"},"История версий"),l.a.createElement("span",{className:"legend_md_meta-info"},"Всего: ",t.innovationCount)),l.a.createElement("ul",null,a)))})),Q=Object(d.a)((function(e){return Object(i.a)(e),l.a.createElement("div",{className:"win-version-filter"},l.a.createElement("header",{className:"win-version-filter__header"},l.a.createElement("span",null,"Версионный фильтр")),l.a.createElement("div",{className:"scroll-wrapper"},l.a.createElement(M,null),l.a.createElement(U,null)))})),q=a("pFkx"),X=function(e){var t=e.message;return l.a.createElement("div",{className:"content__content-placeholder_empty"},l.a.createElement("div",{className:"content-placeholder__informer"},l.a.createElement("span",{className:"content-placeholder__label"},t)))},Z=Object(d.a)((function(e){Object(i.a)(e);var t=Object(g.d)().versionFilter;return l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,{condition:0===t.checkedLength},l.a.createElement(X,{message:"Ничего не выбранно"})),l.a.createElement(L.a,{condition:t.checkedLength>0&&0===t.checkedInnovationCount},l.a.createElement(L.a,{condition:1===t.checkedLength},l.a.createElement(X,{message:"Выбранная версия не содержит нововведений"})),l.a.createElement(L.a,{condition:t.checkedLength>1},l.a.createElement(X,{message:"Выбранные версии не содержат нововведений"}))))})),W=a("DaPz"),$=Object(d.a)((function(e){return Object(i.a)(e),l.a.createElement(o.a,{driver:l.a.createElement(m.b,null),content:l.a.createElement(s.a,{controlBar:l.a.createElement(u.a,null,l.a.createElement("div",{className:"content__win-control-bar_wrapper"},l.a.createElement(D,null,l.a.createElement(Q,null)))),content:l.a.createElement(W.a,null,l.a.createElement(b,null),l.a.createElement(k,null),l.a.createElement(w,null),l.a.createElement(Z,null),l.a.createElement(q.a,null))})})})),ee=a("H8eV"),te=a("bnLi"),ae=a("73Uz"),ne=Object(r.createContext)(null),ce=a("KQm4"),re=Object(r.createContext)(null),le=a("19Yi"),ie=a("h59u"),oe=a("Bapu"),se=a("mLh/"),me=a("cddY"),de=a("S8kh"),ue=a("3ihZ");t.default=function(e){var t,a,n,r,i=e.pageContext,o=e.location,s=i.localization,m=i.innovationData,d=i.winTocTree,u=i.pageNavDataAll,h=(s.pages,Object(c.a)(s,["pages"])),b=g.b.getInstance({winTocTree:d,innovationData:m,pageNavDataAll:u,location:o,initialCheckedVersion:(n=new URLSearchParams(o.search).get("filter"),null!==(r=null==n?void 0:n.split(",").map((function(e){return e.trim()})))&&void 0!==r?r:[]),versionInfoAll:(t=m,a=t.innovations.reduce((function(e,t){return e.hasOwnProperty(t.version)||(e[t.version]=0),e[t.version]++,e}),{}),Object(ce.a)(t.releaseHistory).sort((function(e,t){return Date.parse(t.datePublication)-Date.parse(e.datePublication)})).map((function(e){var t,n=Object(_.b)(e.version);return{stage:n.preReleaseName,version:e.version,updateVersion:n.updateVersion,dateRelease:E.b(e.dateRelease),datePublication:E.b(e.datePublication),count:null!==(t=a[e.version])&&void 0!==t?t:0}})))}),f=b.stores,k=b.validators,p=f.router;return Object(ue.a)(o,p),l.a.createElement(g.a.Provider,{value:f},l.a.createElement(re.Provider,{value:k},l.a.createElement(le.a.Provider,{value:f.behaviorNotificationStore},l.a.createElement(ne.Provider,{value:u},l.a.createElement(te.a.Provider,{value:s},l.a.createElement(de.b.Provider,{value:p},l.a.createElement(me.a.Provider,{value:f.contentIntersectionObserver},l.a.createElement(se.a.Provider,{value:f.contentNav},l.a.createElement(oe.a.Provider,{value:f.contentDownPanelStore},l.a.createElement(ae.a,null,l.a.createElement(ee.a,Object.assign({},h)),l.a.createElement(v.Provider,{value:m},l.a.createElement($,null),l.a.createElement(ie.a,null))))))))))))}},kSBX:function(e,t,a){}}]);
//# sourceMappingURL=component---src-page-templates-what-is-new-page-what-is-new-page-provider-tsx-f3a5b98eef8def8d87ec.js.map