(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FYJp:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a("heD2"),c=function(e){return e.releaseHistory[0]},r=function(e){return new n.Version(e)}},Tp7n:function(e,t,a){"use strict";a.r(t);var n=a("KQm4"),c=a("q1tI"),r=a.n(c),l=a("hGi/"),o=(a("kSBX"),a("T3EJ")),i=a("DEsH"),s=a("1G37"),m=a("eW31"),d=a("8qo5"),u=Object(c.createContext)(null),v=function(){return Object(c.useContext)(u)},h=a("pJAA"),E=a("vIQ3"),f=a("FYJp"),_=function(e){Object(l.a)(e);var t=v(),a=Object(f.a)(t),n=Object(f.b)(a.version),c=h.a(a.dateRelease),o=n.mmp+"/metadata/cover.png";return r.a.createElement("section",{className:"content__section"},r.a.createElement("div",{className:"main-presentation"},r.a.createElement("div",{className:"main-meta"},r.a.createElement("span",{className:"main-meta-informer__version"},n.preReleaseName),r.a.createElement("time",{className:"main-meta-informer__date",dateTime:a.dateRelease},c)),r.a.createElement("h1",{className:"main-title"},n.mmp),r.a.createElement("div",{className:"main-cover"},r.a.createElement(E.a,{className:"win-innovation-cover__cover",relativePath:o,alt:"cover"}))))},b=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"social-network__share ya-share2","data-services":"vkontakte,facebook,twitter,whatsapp,telegram"})},k=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"content__under-cover-bar"},r.a.createElement(b,null))},p=a("EKdO"),N=a("AnUa"),O=a("heD2"),g=a("FATx"),j=a("Fatc"),w=a("uRCh"),C=a("EaY7"),x=Object(m.a)((function(e){Object(l.a)(e),Object(N.a)(),Object(g.a)(),Object(C.a)();var t=Object(j.d)().versionFilter,a=v().innovations.filter((function(e){return t.canDisplayedByVersion(new O.Version(e.version).preReleaseName)})).map((function(e,t){return r.a.createElement("section",{key:t,id:w.pathToNativeElementAttributeValue(e.path),className:"content__section win-content__innovation-list-item"},r.a.createElement(p.a,{commitInfoAll:e.commitInfoAll,contentOnGithubLink:e.fileOnGithubLink}),r.a.createElement("span",{className:"content__html-content-wrapper",dangerouslySetInnerHTML:{__html:e.html}}))}));return r.a.createElement(r.a.Fragment,null,a)})),S=a("kmFt"),y=a("Va/Y"),P=a("KraK"),I=a("ouma"),V=a("OaiF"),A=a("4KgZ"),F=function(e){var t=e.children;return r.a.createElement(S.a,{className:"filter-dropdown"},r.a.createElement(y.a,null,r.a.createElement(P.a,{size:P.b.SM},r.a.createElement(I.m,null),r.a.createElement(A.a,{position:A.b.BottomCenter},"Фильтр версий"))),r.a.createElement(V.a,{className:"filter-dropdown__menu content__control-bar-dropdown-item",openClassName:"filter-dropdown__menu_open-state",closeClassName:"filter-dropdown__menu_close-state"},t))},L=a("TSYQ"),R=a.n(L),T=Object(c.createContext)({name:"",setState:function(e){},getState:function(e){return!1}}),D=function(e){var t=e.name,a=e.children,n=Object(c.useState)({}),l=n[0],o=n[1],i={name:null!=t?t:Object(w.generateStringId)(),setState:function(e){var t=e.id,a=e.checked;return o((function(){return Object.keys(l).reduce((function(e,n){var c;return Object.assign(e,((c={})[n]=n===t&&(null!=a?a:!l[n]),c))}),{})}))},getState:function(e){return l[e]}};return r.a.createElement(T.Provider,{value:i},a)},B=Object(c.createContext)({id:"",checked:!1}),Y=function(){return Object(c.useContext)(B)},J=Object(m.a)((function(e){var t,a,n=e.onChecked,l=e.value,o=e.className,i=e.classNameChecked,s=void 0===i?"checked":i,m=e.classNameNotChecked,d=void 0===m?"not-checked":m,u=e.checked,v=void 0!==u&&u,h=e.id,E=e.children,f=Object(c.useContext)(T),_=f.name,b=f.setState,k=f.getState,p=Object(c.useRef)(null!=h?h:Object(w.generateStringId)()),N=null!==(t=k(p.current))&&void 0!==t?t:v,O={id:p.current,checked:N},g=R()("radio",o,((a={})[s]=N,a[d]=!N,a));return Object(c.useEffect)((function(){b({id:p.current,checked:O.checked!==N?N:v})}),[v]),r.a.createElement(B.Provider,{value:O},r.a.createElement("label",{htmlFor:p.current,className:g},r.a.createElement("input",{type:"radio",id:p.current,name:_,value:l,className:"radio__input",checked:N,onChange:function(){var e={id:p.current,checked:!N};b(Object.assign({},e)),n&&n(Object.assign({},e))}}),E))})),H=Object(m.a)((function(e){var t,a=e.onChecked,n=e.className,l=e.classNameChecked,o=void 0===l?"checked":l,i=e.classNameNotChecked,s=void 0===i?"not-checked":i,m=e.value,d=e.children,u=e.checked,v=void 0!==u&&u,h=e.id,E=void 0===h?Object(w.generateStringId)():h,f=Object(c.useRef)(null!=E?E:Object(w.generateStringId)()),_=R()("checkbox",n,((t={})[o]=v,t[s]=!v,t)),b={id:f.current,checked:v};return r.a.createElement(B.Provider,{value:b},r.a.createElement("label",{className:_},r.a.createElement("input",{type:"checkbox",value:m,id:f.current,className:"checkbox__input",onChange:function(){a&&a({checked:!v,id:f.current})},checked:v}),d))})),K=function(e){var t=e.id,a=e.className,n=e.children,c=Y().id,l=void 0===c?t:c,o=R()("label",a);return r.a.createElement("label",{htmlFor:l,className:o},n)},z=a("MM21"),G=function(e){var t,a=e.className,n=Y().checked,c=R()("checkbox__icon-group",a,((t={})["checkbox__icon-group_checked"]=n,t["checkbox__icon-group_not-checked"]=!n,t));return r.a.createElement("div",{className:c},r.a.createElement(z.a,{condition:n},r.a.createElement(I.h,{className:"checkbox__svg-icon"})),r.a.createElement(z.a,{condition:!n},r.a.createElement(I.i,{className:"checkbox__svg-icon"})))},M=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.c)();return r.a.createElement("form",{className:"win-filter-dropdown-menu__control-bar"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md"},"Отобразить:"),r.a.createElement(D,{name:"filter-version"},r.a.createElement(J,{value:"last",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedLastVersion()},checked:t.isLastVersionChecked},r.a.createElement(K,null,"Последнее")),r.a.createElement(J,{value:"all",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedAllVersion()},checked:t.isAllVersionChecked},r.a.createElement(K,null,"Все")))))})),Q=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.c)(),a=t.versionInfoAll.map((function(e,a){return r.a.createElement("li",{key:a,className:"win-filter-content-form__list-item"},r.a.createElement(H,{id:e.data.version,className:"win-filter-content-form__checkbox",value:e.data.version,onChecked:function(){return t.changeByVersion(e.data.version)},checked:e.checked},r.a.createElement(K,{className:"win-filter-content-form__label"},r.a.createElement(G,null),r.a.createElement("span",{className:"win-filter-content-form__label_version"},e.data.version),r.a.createElement("span",{className:"win-filter-content-form__label_date"},"(",e.data.dateRelease,")"),r.a.createElement("span",{className:"win-filter-content-form__label_count"},e.data.count))))}));return r.a.createElement("form",{className:"win-filter-content-form"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md legend-with-meta"},r.a.createElement("span",{className:"legend_md_base-info"},"История версий"),r.a.createElement("span",{className:"legend_md_meta-info"},"Всего: ",t.innovationCount)),r.a.createElement("ul",null,a)))})),U=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement("div",{className:"win-version-filter"},r.a.createElement("header",{className:"win-version-filter__header"},r.a.createElement("span",null,"Версионный фильтр")),r.a.createElement("div",{className:"scroll-wrapper"},r.a.createElement(M,null),r.a.createElement(Q,null)))})),q=a("pFkx"),X=function(e){var t=e.message;return r.a.createElement("div",{className:"content__content-placeholder_empty"},r.a.createElement("div",{className:"content-placeholder__informer"},r.a.createElement("span",{className:"content-placeholder__label"},t)))},Z=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.d)().versionFilter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{condition:0===t.checkedLength},r.a.createElement(X,{message:"Ничего не выбранно"})),r.a.createElement(z.a,{condition:t.checkedLength>0&&0===t.checkedInnovationCount},r.a.createElement(z.a,{condition:1===t.checkedLength},r.a.createElement(X,{message:"Выбранная версия не содержит нововведений"})),r.a.createElement(z.a,{condition:t.checkedLength>1},r.a.createElement(X,{message:"Выбранные версии не содержат нововведений"}))))})),W=a("DaPz"),$=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement(o.a,{driver:r.a.createElement(s.b,null),content:r.a.createElement(i.a,{controlBar:r.a.createElement(d.a,null,r.a.createElement("div",{className:"content__win-control-bar_wrapper"},r.a.createElement(F,null,r.a.createElement(U,null)))),content:r.a.createElement(W.a,null,r.a.createElement(_,null),r.a.createElement(k,null),r.a.createElement(x,null),r.a.createElement(Z,null),r.a.createElement(q.a,null))})})})),ee=a("H8eV"),te=a("bnLi"),ae=a("73Uz"),ne=Object(c.createContext)(null),ce=function(e){var t=e.innovations.reduce((function(e,t){return e.hasOwnProperty(t.version)||(e[t.version]=0),e[t.version]++,e}),{});return e.releaseHistory.map((function(e){var a;return{version:Object(f.b)(e.version).preReleaseName,dateRelease:h.b(e.dateRelease),count:null!==(a=t[e.version])&&void 0!==a?a:0}}))},re=function(e){var t;return null!==(t=null==e?void 0:e.split(",").map((function(e){return e.trim()})))&&void 0!==t?t:[]},le=Object(c.createContext)(null),oe=a("19Yi"),ie=a("h59u"),se=a("Bapu"),me=a("mLh/"),de=a("cddY"),ue=a("S8kh"),ve=a("3ihZ");t.default=function(e){var t=e.pageContext,a=e.location,l=t.localization,o=t.innovationData,i=t.winTocTree,s=t.pageNavDataAll,m=j.b.getInstance({winTocTree:i,innovationData:o,pageNavDataAll:s,location:a,initialCheckedVersion:re(new URLSearchParams(a.search).get("filter")),versionInfoAll:ce(o)}),d=m.stores,v=m.validators,h=d.router;return Object(ve.a)(a,h),Object(c.useLayoutEffect)((function(){var e=d.versionFilter;e.clean(),e.addVersionInfo.apply(e,Object(n.a)(ce(o)));var t=re(h.search.get("filter"));t.length>0?e.checkedByVersion.apply(e,Object(n.a)(t)):e.checkedAllVersion()}),[h.pageName]),r.a.createElement(j.a.Provider,{value:d},r.a.createElement(le.Provider,{value:v},r.a.createElement(oe.a.Provider,{value:d.behaviorNotificationStore},r.a.createElement(ne.Provider,{value:s},r.a.createElement(te.a.Provider,{value:l},r.a.createElement(ue.b.Provider,{value:h},r.a.createElement(de.a.Provider,{value:d.contentIntersectionObserver},r.a.createElement(me.a.Provider,{value:d.contentNav},r.a.createElement(se.a.Provider,{value:d.contentDownPanelStore},r.a.createElement(ae.a,null,r.a.createElement(ee.a,null),r.a.createElement(u.Provider,{value:o},r.a.createElement($,null),r.a.createElement(ie.a,null))))))))))))}},kSBX:function(e,t,a){}}]);
//# sourceMappingURL=component---src-page-templates-what-is-new-page-what-is-new-page-provider-tsx-acb337fb5c752bdc6f76.js.map