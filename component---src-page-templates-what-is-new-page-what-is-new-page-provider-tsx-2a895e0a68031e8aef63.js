(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{FYJp:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a("heD2"),c=function(e){return e.releaseHistory[0]},r=function(e){return new n.Version(e)}},Tp7n:function(e,t,a){"use strict";a.r(t);var n=a("KQm4"),c=a("q1tI"),r=a.n(c),l=a("hGi/"),i=(a("kSBX"),a("T3EJ")),o=a("DEsH"),s=a("1G37"),m=a("eW31"),d=a("8qo5"),u=Object(c.createContext)(null),v=function(){return Object(c.useContext)(u)},h=a("pJAA"),E=a("vIQ3"),f=a("FYJp"),_=function(e){Object(l.a)(e);var t=v(),a=Object(f.a)(t),n=Object(f.b)(a.version),c=h.a(a.dateRelease),i=n.mmp+"/metadata/cover.png";return r.a.createElement("section",{className:"content__section"},r.a.createElement("div",{className:"main-presentation"},r.a.createElement("div",{className:"main-meta"},r.a.createElement("span",{className:"main-meta-informer__version"},n.preReleaseName),r.a.createElement("time",{className:"main-meta-informer__date",dateTime:a.dateRelease},c)),r.a.createElement("h1",{className:"main-title"},n.mmp),r.a.createElement("div",{className:"main-cover"},r.a.createElement(E.a,{className:"win-innovation-cover__cover",relativePath:i,alt:"cover"}))))},b=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"social-network__share ya-share2","data-services":"vkontakte,facebook,twitter,whatsapp,telegram"})},k=function(e){return Object(l.a)(e),r.a.createElement("div",{className:"content__under-cover-bar"},r.a.createElement(b,null))},p=a("EKdO"),N=a("AnUa"),O=a("heD2"),g=a("FATx"),j=a("a3MC"),w=a("uRCh"),C=Object(m.a)((function(e){Object(l.a)(e),Object(N.a)(),Object(g.a)();var t=Object(j.d)().versionFilter,a=v().innovations.filter((function(e){return t.canDisplayedByVersion(new O.Version(e.version).preReleaseName)})).map((function(e,t){return r.a.createElement("section",{key:t,id:w.pathToNativeElementAttributeValue(e.path),className:"content__section win-content__innovation-list-item"},r.a.createElement(p.a,{commitInfoAll:e.commitInfoAll,contentOnGithubLink:e.fileOnGithubLink}),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.html}}))}));return r.a.createElement(r.a.Fragment,null,a)})),x=a("kmFt"),S=a("Va/Y"),y=a("KraK"),P=a("ouma"),I=a("OaiF"),V=a("4KgZ"),A=function(e){var t=e.children;return r.a.createElement(x.a,{className:"filter-dropdown"},r.a.createElement(S.a,null,r.a.createElement(y.a,{size:y.b.SM},r.a.createElement(P.m,null),r.a.createElement(V.a,{position:V.b.BottomCenter},"Фильтр версий"))),r.a.createElement(I.a,{className:"filter-dropdown__menu content__control-bar-dropdown-item",openClassName:"filter-dropdown__menu_open-state",closeClassName:"filter-dropdown__menu_close-state"},t))},F=a("TSYQ"),L=a.n(F),R=Object(c.createContext)({name:"",setState:function(e){},getState:function(e){return!1}}),T=function(e){var t=e.name,a=e.children,n=Object(c.useState)({}),l=n[0],i=n[1],o={name:null!=t?t:Object(w.generateStringId)(),setState:function(e){var t=e.id,a=e.checked;return i((function(){return Object.keys(l).reduce((function(e,n){var c;return Object.assign(e,((c={})[n]=n===t&&(null!=a?a:!l[n]),c))}),{})}))},getState:function(e){return l[e]}};return r.a.createElement(R.Provider,{value:o},a)},D=Object(c.createContext)({id:"",checked:!1}),B=function(){return Object(c.useContext)(D)},J=Object(m.a)((function(e){var t,a,n=e.onChecked,l=e.value,i=e.className,o=e.classNameChecked,s=void 0===o?"checked":o,m=e.classNameNotChecked,d=void 0===m?"not-checked":m,u=e.checked,v=void 0!==u&&u,h=e.id,E=e.children,f=Object(c.useContext)(R),_=f.name,b=f.setState,k=f.getState,p=Object(c.useRef)(null!=h?h:Object(w.generateStringId)()),N=null!==(t=k(p.current))&&void 0!==t?t:v,O={id:p.current,checked:N},g=L()("radio",i,((a={})[s]=N,a[d]=!N,a));return Object(c.useEffect)((function(){b({id:p.current,checked:O.checked!==N?N:v})}),[v]),r.a.createElement(D.Provider,{value:O},r.a.createElement("label",{htmlFor:p.current,className:g},r.a.createElement("input",{type:"radio",id:p.current,name:_,value:l,className:"radio__input",checked:N,onChange:function(){var e={id:p.current,checked:!N};b(Object.assign({},e)),n&&n(Object.assign({},e))}}),E))})),Y=Object(m.a)((function(e){var t,a=e.onChecked,n=e.className,l=e.classNameChecked,i=void 0===l?"checked":l,o=e.classNameNotChecked,s=void 0===o?"not-checked":o,m=e.value,d=e.children,u=e.checked,v=void 0!==u&&u,h=e.id,E=void 0===h?Object(w.generateStringId)():h,f=Object(c.useRef)(null!=E?E:Object(w.generateStringId)()),_=L()("checkbox",n,((t={})[i]=v,t[s]=!v,t)),b={id:f.current,checked:v};return r.a.createElement(D.Provider,{value:b},r.a.createElement("label",{className:_},r.a.createElement("input",{type:"checkbox",value:m,id:f.current,className:"checkbox__input",onChange:function(){a&&a({checked:!v,id:f.current})},checked:v}),d))})),H=function(e){var t=e.id,a=e.className,n=e.children,c=B().id,l=void 0===c?t:c,i=L()("label",a);return r.a.createElement("label",{htmlFor:l,className:i},n)},K=a("MM21"),M=function(e){var t,a=e.className,n=B().checked,c=L()("checkbox__icon-group",a,((t={})["checkbox__icon-group_checked"]=n,t["checkbox__icon-group_not-checked"]=!n,t));return r.a.createElement("div",{className:c},r.a.createElement(K.a,{condition:n},r.a.createElement(P.h,{className:"checkbox__svg-icon"})),r.a.createElement(K.a,{condition:!n},r.a.createElement(P.i,{className:"checkbox__svg-icon"})))},z=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.c)();return r.a.createElement("form",{className:"win-filter-dropdown-menu__control-bar"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md"},"Отобразить:"),r.a.createElement(T,{name:"filter-version"},r.a.createElement(J,{value:"last",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedLastVersion()},checked:t.isLastVersionChecked},r.a.createElement(H,null,"Последнее")),r.a.createElement(J,{value:"all",className:"win-filter-version__radio",classNameChecked:"win-filter-version__radio_checked",classNameNotChecked:"win-filter-version__radio_not-checked",onChecked:function(e){return e.checked&&t.checkedAllVersion()},checked:t.isAllVersionChecked},r.a.createElement(H,null,"Все")))))})),G=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.c)(),a=t.versionInfoAll.map((function(e,a){return r.a.createElement("li",{key:a,className:"win-filter-content-form__list-item"},r.a.createElement(Y,{id:e.data.version,className:"win-filter-content-form__checkbox",value:e.data.version,onChecked:function(){return t.changeByVersion(e.data.version)},checked:e.checked},r.a.createElement(H,{className:"win-filter-content-form__label"},r.a.createElement(M,null),r.a.createElement("span",{className:"win-filter-content-form__label_version"},e.data.version),r.a.createElement("span",{className:"win-filter-content-form__label_date"},"(",e.data.dateRelease,")"),r.a.createElement("span",{className:"win-filter-content-form__label_count"},e.data.count))))}));return r.a.createElement("form",{className:"win-filter-content-form"},r.a.createElement("fieldset",{className:"fieldset_md"},r.a.createElement("legend",{className:"legend_md legend-with-meta"},r.a.createElement("span",{className:"legend_md_base-info"},"История версий"),r.a.createElement("span",{className:"legend_md_meta-info"},"Всего: ",t.innovationCount)),r.a.createElement("ul",null,a)))})),Q=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement("div",{className:"win-version-filter"},r.a.createElement("header",{className:"win-version-filter__header"},r.a.createElement("span",null,"Версионный фильтр")),r.a.createElement("div",{className:"scroll-wrapper"},r.a.createElement(z,null),r.a.createElement(G,null)))})),U=a("pFkx"),q=function(e){var t=e.message;return r.a.createElement("div",{className:"content__content-placeholder_empty"},r.a.createElement("div",{className:"content-placeholder__informer"},r.a.createElement("span",{className:"content-placeholder__label"},t)))},X=Object(m.a)((function(e){Object(l.a)(e);var t=Object(j.d)().versionFilter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{condition:0===t.checkedLength},r.a.createElement(q,{message:"Ничего не выбранно"})),r.a.createElement(K.a,{condition:t.checkedLength>0&&0===t.checkedInnovationCount},r.a.createElement(K.a,{condition:1===t.checkedLength},r.a.createElement(q,{message:"Выбранная версия не содержит нововведений"})),r.a.createElement(K.a,{condition:t.checkedLength>1},r.a.createElement(q,{message:"Выбранные версии не содержат нововведений"}))))})),Z=a("DaPz"),W=Object(m.a)((function(e){return Object(l.a)(e),r.a.createElement(i.a,{driver:r.a.createElement(s.b,null),content:r.a.createElement(o.a,{controlBar:r.a.createElement(d.a,null,r.a.createElement("div",{className:"content__win-control-bar_wrapper"},r.a.createElement(A,null,r.a.createElement(Q,null)))),content:r.a.createElement(Z.a,null,r.a.createElement(_,null),r.a.createElement(k,null),r.a.createElement(C,null),r.a.createElement(X,null),r.a.createElement(U.a,null))})})})),$=a("H8eV"),ee=a("bnLi"),te=a("73Uz"),ae=Object(c.createContext)(null),ne=function(e){var t=e.innovations.reduce((function(e,t){return e.hasOwnProperty(t.version)||(e[t.version]=0),e[t.version]++,e}),{});return e.releaseHistory.map((function(e){var a;return{version:Object(f.b)(e.version).preReleaseName,dateRelease:h.b(e.dateRelease),count:null!==(a=t[e.version])&&void 0!==a?a:0}}))},ce=function(e){var t;return null!==(t=null==e?void 0:e.split(",").map((function(e){return e.trim()})))&&void 0!==t?t:[]},re=Object(c.createContext)(null),le=a("19Yi"),ie=a("h59u"),oe=a("Bapu"),se=a("mLh/"),me=a("cddY"),de=a("S8kh"),ue=a("3ihZ");t.default=function(e){var t=e.pageContext,a=e.location,l=t.localization,i=t.innovationData,o=t.winTocTree,s=t.pageNavDataAll,m=j.b.getInstance({winTocTree:o,innovationData:i,pageNavDataAll:s,location:a,initialCheckedVersion:ce(new URLSearchParams(a.search).get("filter")),versionInfoAll:ne(i)}),d=m.stores,v=m.validators,h=d.router;return Object(ue.a)(a,h),Object(c.useLayoutEffect)((function(){var e=d.versionFilter;e.clean(),e.addVersionInfo.apply(e,Object(n.a)(ne(i)));var t=ce(h.search.get("filter"));t.length>0?e.checkedByVersion.apply(e,Object(n.a)(t)):e.checkedAllVersion()}),[h.pageName]),r.a.createElement(j.a.Provider,{value:d},r.a.createElement(re.Provider,{value:v},r.a.createElement(le.a.Provider,{value:d.behaviorNotificationStore},r.a.createElement(ae.Provider,{value:s},r.a.createElement(ee.a.Provider,{value:l},r.a.createElement(de.b.Provider,{value:h},r.a.createElement(me.a.Provider,{value:d.contentIntersectionObserver},r.a.createElement(se.a.Provider,{value:d.contentNav},r.a.createElement(oe.a.Provider,{value:d.contentDownPanelStore},r.a.createElement(te.a,null,r.a.createElement($.a,null),r.a.createElement(u.Provider,{value:i},r.a.createElement(W,null),r.a.createElement(ie.a,null))))))))))))}},kSBX:function(e,t,a){}}]);
//# sourceMappingURL=component---src-page-templates-what-is-new-page-what-is-new-page-provider-tsx-2a895e0a68031e8aef63.js.map